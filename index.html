<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Tail Tangle</title>

    <!-- === SEO META TAGS START === -->
    <meta name="description" content="Pre-order 10 Tail Tangle, the fun card game where you compete to chain 10 tails! Features unique gameplay!">
    <link rel="canonical" href="https://www.10tailtangle.com/">
    <meta name="keywords" content="10 Tail Tangle, Ten Tail Tangle, card game, pre-order, tail tangle, MofuMiro">
    <meta property="og:title" content="10 Tail Tangle - The Card Game">
    <meta property="og:description" content="Pre-order 10 Tail Tangle! Compete to chain 10 tails in this unique card game!">
    <!-- Using actual domain and boxart.webp -->
    <meta property="og:image" content="https://www.10tailtangle.com/images/boxart.webp">
    <meta property="og:url" content="https://www.10tailtangle.com/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="10 Tail Tangle - The Card Game">
    <meta name="twitter:description" content="Pre-order 10 Tail Tangle! Compete to chain 10 tails in this unique card game!">
    <!-- Using actual domain and boxart.webp -->
    <meta name="twitter:image" content="https://www.10tailtangle.com/images/boxart.webp">
    <!-- <meta name="twitter:site" content="@yourtwitterhandle"> -->
    <!-- === SEO META TAGS END === -->

    <!-- Updated Favicon Path to WEBP -->
    <link rel="icon" type="image/webp" href="images/favicon.webp">

    <style>
        /* --- Global Styles & Theme --- */
        :root {
            --card-width: 150px; --card-height: 227px;
            --v-col-gap: 25px; --v-col-angle: -15deg; --v-col-speed: 80s; --v-col-z-index: 10;
            --h-row-gap: 20px; --h-row-speed-1: 60s; --h-row-speed-2: 75s; --h-row-z-index: 5; --h-row-top-offset: 8%; --h-row-bottom-offset: 8%;
            --color-bg: #1a1a1a; --color-bg-purchase: #222222; --color-bg-guest: #161616;
            --color-bg-rgb: 26, 26, 26; --color-checker-light: #333333; --color-checker-dark: #222222; --color-card-border: #555555; --color-card-front-bg: #ffffff; --color-card-back-bg: #1f1f1f; --color-text-light: #f0f0f0; --color-text-medium: #bbbbbb; --color-text-dark: #1a1a1a; --color-accent: #e0e0e0;
            --flip-speed: 0.6s; --hover-lift: 50px; --snap-transition-duration: 0.7s;
            --float-speed: 5s;
            --zoomed-overlay-bg: rgba(10, 10, 10, 0.9);
            --zoomed-transition-speed: 0.35s;
            --scroll-throttle-delay: 100; /* ms delay for scroll event throttling */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            min-height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text-light);
            position: relative;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        body.zoomed-open { overflow: hidden; }
        body::before { content: ''; position: fixed; inset: 0; background-image: repeating-linear-gradient(45deg, var(--color-checker-dark) 25%, transparent 25%, transparent 75%, var(--color-checker-dark) 75%, var(--color-checker-dark)), repeating-linear-gradient( -45deg, var(--color-checker-dark) 25%, var(--color-checker-light) 25%, var(--color-checker-light) 75%, var(--color-checker-dark) 75%, var(--color-checker-dark)); background-size: 40px 40px; opacity: 0.3; z-index: -1; }

        .main-wrapper { overflow-x: hidden; position: relative; }

        /* --- Hero Section --- */
        .hero-section { height: 100vh; width: 100%; position: relative; overflow: hidden; z-index: 20; }
        .hero-section::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 120px; background: linear-gradient(to top, rgba(var(--color-bg-rgb), 0.8) 0%, rgba(var(--color-bg-rgb), 0.5) 40%, transparent 100%); z-index: 40; pointer-events: none; opacity: 0.9; transition: opacity 0.5s ease-out; will-change: opacity; }
        .hero-section.prompt-hidden::after { opacity: 0; }
        .game-logo { position: absolute; top: 30px; left: 50%; transform: translateX(-50%); width: 250px; height: auto; z-index: 55; opacity: 0.9; transition: opacity 0.5s ease-out; will-change: opacity; }
        h1.game-logo { margin: 0; padding: 0; line-height: 0; }
        .game-logo img { display: block; width: 100%; height: 100%; object-fit: contain; }
        .hero-section.prompt-hidden .game-logo { /* Keep visible */ }
        .game-logo--purchase { position: relative; transform: none; left: auto; top: auto; width: 280px; margin: 0 auto 35px auto; opacity: 1; display: block; }
        .scroll-wrapper { position: absolute; inset: 0; perspective: 1000px; overflow: hidden; transition: opacity var(--snap-transition-duration) ease-in-out, transform var(--snap-transition-duration) ease-in-out; will-change: opacity, transform; }
        .scroll-wrapper.fading-out { opacity: 0; transform: scale(0.9); }
        .card-column-container { position: absolute; inset: -20% 0; display: flex; justify-content: center; align-items: flex-start; z-index: var(--v-col-z-index); transform-style: preserve-3d; transform: rotate(var(--v-col-angle)); pointer-events: none; }
        .card-column { display: flex; flex-direction: column; gap: var(--v-col-gap); transform-style: preserve-3d; animation: scrollVertical var(--v-col-speed) linear infinite; will-change: transform; pointer-events: auto; }
        @keyframes scrollVertical { 0% { transform: translateY(0); } 100% { transform: translateY(calc(-1 * var(--v-col-scroll-height, 2000px))); } }
        .horizontal-row-container { position: absolute; left: -10%; right: -10%; height: var(--card-height); z-index: var(--h-row-z-index); transform-style: preserve-3d; pointer-events: none; }
        .horizontal-row-container.top { top: var(--h-row-top-offset); }
        .horizontal-row-container.bottom { bottom: var(--h-row-bottom-offset); }
        .horizontal-card-track { display: flex; gap: var(--h-row-gap); position: absolute; top: 0; left: 0; transform-style: preserve-3d; will-change: transform; pointer-events: auto; /* Width set by JS */ }
        .horizontal-row-container.top .horizontal-card-track { animation: scrollHorizontal var(--h-row-speed-1) linear infinite; }
        .horizontal-row-container.bottom .horizontal-card-track { animation: scrollHorizontalReverse var(--h-row-speed-2) linear infinite; }
        @keyframes scrollHorizontal { 0% { transform: translateX(0); } 100% { transform: translateX(calc(-1 * var(--h-row-scroll-width, 3000px))); } }
        @keyframes scrollHorizontalReverse { 0% { transform: translateX(calc(-1 * var(--h-row-scroll-width, 3000px))); } 100% { transform: translateX(0); } }
        .card-container { width: var(--card-width); height: var(--card-height); cursor: pointer; transform-style: preserve-3d; transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); flex-shrink: 0; position: relative; }
        .card-container:hover { transform: translateZ(var(--hover-lift)); z-index: 100; }
        .card { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform var(--flip-speed) ease-in-out; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4); }
        .card-container:hover .card { transform: rotateY(180deg); }
        .card-face { position: absolute; inset: 0; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 8px; display: flex; justify-content: center; align-items: center; overflow: hidden; background-color: var(--color-card-front-bg); }
        .card-front { color: var(--color-text-dark); background-size: cover; background-position: center; background-repeat: no-repeat; }
        /* Updated Card Back Path to WEBP */
        .card-back { background-color: var(--color-card-back-bg); transform: rotateY(180deg); background-image: url('images/cardback.webp'); background-size: cover; background-position: center; background-repeat: no-repeat; }
        .card-back span { display: none; }
        .scroll-prompt { position: absolute; bottom: 35px; left: 50%; transform: translateX(-50%); width: auto; text-align: center; color: var(--color-accent); font-size: 1.4rem; font-weight: 500; opacity: 1; z-index: 60; cursor: default; transition: opacity 0.5s ease-out; will-change: opacity; text-shadow: 0 0 10px rgba(0, 0, 0, 1); }
        .scroll-prompt::after { content: '▼'; display: block; margin-top: 8px; font-size: 1.6rem; animation: bounce 2s infinite ease-in-out; line-height: 1; }
        .scroll-prompt.hidden { opacity: 0; pointer-events: none; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }

        /* --- Purchase Section --- */
        .purchase-section { padding: 80px 20px 120px 20px; min-height: 100vh; position: relative; z-index: 1; display: flex; align-items: center; justify-content: center; overflow: visible; background-color: var(--color-bg-purchase); }
        .purchase-section::before { content: ''; position: absolute; inset: -50%; z-index: -2; background: linear-gradient( 135deg, rgba(50, 50, 50, 0.3) 10%, rgba(40, 40, 40, 0.2) 30%, rgba(30, 30, 30, 0.3) 50%, rgba(40, 40, 40, 0.2) 70%, rgba(50, 50, 50, 0.3) 90% ); background-size: 400% 400%; animation: gradientBG 30s ease infinite; filter: blur(10px); }
        @keyframes gradientBG { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .purchase-section::after { content: ''; position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: -1; background-image: radial-gradient(circle at 20% 30%, hsla(0, 0%, 100%, 0.05) 0px, transparent 80px), radial-gradient(circle at 80% 70%, hsla(0, 0%, 100%, 0.04) 0px, transparent 100px), radial-gradient(circle at 50% 90%, hsla(0, 0%, 100%, 0.03) 0px, transparent 60px), radial-gradient(circle at 10% 80%, hsla(0, 0%, 100%, 0.04) 0px, transparent 90px), radial-gradient(circle at 90% 10%, hsla(0, 0%, 100%, 0.05) 0px, transparent 70px); background-size: 100% 100%; background-position: center center; opacity: 0.8; animation: slowFloat 60s linear infinite alternate; will-change: transform; }
        @keyframes slowFloat { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(20px, -30px) rotate(5deg); } }
        .background-card-floater { position: absolute; inset: 0; z-index: 0; pointer-events: none; perspective: 1500px; overflow: hidden; }
        .floating-card-container { width: var(--card-width); height: var(--card-height); position: absolute; transform-style: preserve-3d; opacity: 0.15; filter: blur(1.5px) grayscale(30%); animation-name: floatAround; animation-timing-function: ease-in-out; animation-iteration-count: infinite; will-change: transform, opacity; }
        .floating-card-container:nth-child(2n) { animation-name: floatAroundAlt; opacity: 0.2; filter: blur(1px) grayscale(10%); }
        @keyframes floatAround { 0%{transform:translate3d(0,0,-50px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1)} 25%{transform:translate3d(40px,-60px,-30px) rotateX(10deg) rotateY(-15deg) rotateZ(5deg) scale(1.02)} 50%{transform:translate3d(-30px,50px,0px) rotateX(-5deg) rotateY(10deg) rotateZ(-10deg) scale(1)} 75%{transform:translate3d(20px,30px,-40px) rotateX(5deg) rotateY(5deg) rotateZ(15deg) scale(.98)} 100%{transform:translate3d(0,0,-50px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1)} }
        @keyframes floatAroundAlt { 0%{transform:translate3d(0,0,-30px) rotateX(5deg) rotateY(-5deg) rotateZ(10deg) scale(1)} 25%{transform:translate3d(-50px,40px,-60px) rotateX(-15deg) rotateY(10deg) rotateZ(-5deg) scale(.98)} 50%{transform:translate3d(40px,-20px,-10px) rotateX(10deg) rotateY(-5deg) rotateZ(5deg) scale(1.01)} 75%{transform:translate3d(-20px,-50px,-25px) rotateX(-5deg) rotateY(15deg) rotateZ(-5deg) scale(1)} 100%{transform:translate3d(0,0,-30px) rotateX(5deg) rotateY(-5deg) rotateZ(10deg) scale(1)} }
        .purchase-display-area { display: flex; align-items: center; justify-content: center; gap: 60px; width: 100%; max-width: 1100px; position: relative; z-index: 1; flex-wrap: wrap; }
        .display-left { flex: 1 1 45%; display: flex; flex-direction: column; align-items: center; gap: 25px; max-width: 450px; }
        .display-right.purchase-content { flex: 1 1 45%; max-width: 500px; text-align: center; display: flex; flex-direction: column; align-items: center; }
        .box-art-container { flex-basis: auto; width: 100%; max-width: 400px; text-align: center; perspective: 1000px; position: relative; margin-bottom: 20px; }
        .box-art-interactive-container { display: inline-block; transition: transform 0.4s ease-out; animation: bobbingBox var(--float-speed) ease-in-out infinite; animation-delay: -0.5s; transform-style: preserve-3d; }
        .box-art-interactive-container:hover { transform: rotateY(15deg) rotateX(5deg) scale(1.03) translateZ(30px); animation-play-state: paused; }
        .box-art-image { display: block; max-width: 100%; height: auto; filter: drop-shadow(0 8px 20px rgba(0,0,0,0.5)); }
         @keyframes bobbingBox { 0%, 100% { transform: translateY(0) ; } 50% { transform: translateY(-8px) ; } }
        .promo-card-container {
            --promo-card-width: 150px; --promo-card-height: calc(var(--promo-card-width) * 1.51);
            width: var(--promo-card-width); height: var(--promo-card-height);
            perspective: 800px; cursor: pointer;
            animation: bobbingPromo var(--float-speed) ease-in-out infinite reverse; animation-delay: -1.5s;
            position: absolute; bottom: -8%; right: -15%; z-index: 10;
            transform: rotate(10deg);
            transition: transform 0.3s ease-out;
        }
        .promo-card-container:hover { transform: rotate(2deg) scale(1.08) translateZ(50px); animation-play-state: paused; }
        @keyframes bobbingPromo { 0%, 100% { transform: translateY(0) rotate(10deg); } 50% { transform: translateY(-10px) rotate(10deg); } }
        .promo-card { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform var(--flip-speed) ease-in-out; will-change: transform; }
        .promo-card-container:hover .promo-card { transform: rotateY(180deg); }
        .promo-card-face { position: absolute; inset: 0; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 6px; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.4); background-color: var(--color-card-back-bg); display: flex; justify-content: center; align-items: center; }
        .promo-card-front {}
        /* Updated Promo Card Back Path to WEBP */
        .promo-card-back { transform: rotateY(180deg); background-image: url('images/cardback.webp'); background-size: cover; background-position: center; background-repeat: no-repeat; }
        .promo-card-image { display: block; width: 100%; height: 100%; object-fit: cover; }
         .promo-back-logo { display: none; }
        .promo-text-image {
            position: absolute; width: 180px; height: auto;
            bottom: -8%; right: -15%;
            transform: translate(20%, calc(-250% - 10px)) rotate(7deg);
            z-index: 11; pointer-events: none; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.5)); transform-origin: center;
        }
         .promo-offer { display: none; }
        .purchase-content > p {
            font-size: 1.2rem; font-weight: 500; color: var(--color-text-light);
            line-height: 1.7; margin-bottom: 40px; max-width: 550px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
        }
        .button-link { text-decoration: none; display: inline-block; margin-top: 25px; }
        .buy-button { padding: 18px 45px; font-size: 1.3rem; font-weight: bold; color: var(--color-text-dark); background-image: linear-gradient(45deg, var(--color-accent) 0%, #ffffff 100%); border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); letter-spacing: 0.5px; display: block; }
        .buy-button:hover { background-image: linear-gradient(45deg, #ffffff 0%, var(--color-accent) 100%); transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 20px rgba(255, 255, 255, 0.2); }
        .buy-button:active { transform: translateY(-1px) scale(0.98); box-shadow: 0 3px 10px rgba(0,0,0,0.3); }

        /* Artist Scroll Prompt */
        .artist-scroll-prompt { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); width: auto; text-align: center; color: var(--color-text-medium); font-size: 1.1rem; font-weight: 500; opacity: 1; z-index: 5; cursor: default; transition: opacity 0.5s ease-out; will-change: opacity; text-shadow: 0 0 6px rgba(0, 0, 0, 0.8); pointer-events: none; }
        .artist-scroll-prompt::after { content: '▼'; display: block; margin-top: 4px; font-size: 1.3rem; animation: bounce 2s infinite ease-in-out; line-height: 1; animation-delay: -0.5s; }
        .artist-scroll-prompt.hidden { opacity: 0; }

        /* --- Guest Artists Section --- */
        .guest-artists-section { padding: 80px 20px; background-color: var(--color-bg-guest); position: relative; z-index: 1; overflow: hidden; min-height: 100vh; }
        .guest-artists-bg-floater { position: absolute; inset: 0; z-index: -1; pointer-events: none; perspective: 1500px; overflow: hidden; }
        .guest-artists-section::before { content: ''; position: absolute; inset: 0; background-image: repeating-linear-gradient( 135deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px, transparent 10px ); background-size: 10px 10px; opacity: 0.5; z-index: -2; }
        .guest-artists-container { max-width: 1200px; margin: 0 auto; text-align: center; position: relative; z-index: 1; padding-top: 30px; }
        .guest-artists-prompt-img { display: block; max-width: 450px; width: 85%; height: auto; margin: 0 auto 50px auto; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4)); }
        .guest-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 35px; justify-items: center; }
        .guest-card { background-color: transparent; border-radius: 10px; padding: 0; box-shadow: none; transition: transform 0.3s ease; width: 100%; max-width: 210px; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
         .guest-card:hover { transform: scale(1.05); }
        .guest-card img { display: block; width: 100%; max-width: calc(var(--card-width) * 1.15); height: auto; border-radius: 8px; margin-bottom: 0; object-fit: cover; pointer-events: none; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: box-shadow 0.3s ease; }
        .guest-card:hover img { box-shadow: 0 8px 25px rgba(0,0,0,0.4); }
        .guest-card .artist-link { display: none; }

        /* --- Zoomed Artist View Styles --- */
        .zoomed-artist-overlay { position: fixed; inset: 0; background-color: var(--zoomed-overlay-bg); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity var(--zoomed-transition-speed) ease, visibility 0s linear var(--zoomed-transition-speed); padding: 20px; cursor: pointer; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); }
        .zoomed-artist-overlay.visible { opacity: 1; visibility: visible; transition: opacity var(--zoomed-transition-speed) ease, visibility 0s linear 0s, backdrop-filter var(--zoomed-transition-speed) ease; }
        .zoomed-artist-content { display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 40px; width: auto; height: auto; max-width: 90vw; max-height: 85vh; cursor: default; transform: scale(0.95); transition: transform var(--zoomed-transition-speed) cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; }
        .zoomed-artist-overlay.visible .zoomed-artist-content { transform: scale(1); }
        .zoomed-artist-image { display: block; max-width: 45vw; max-height: 80vh; width: auto; height: auto; object-fit: contain; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.6); flex-shrink: 0; }
        .zoomed-artist-info { display: flex; flex-direction: column; align-items: flex-start; gap: 15px; max-width: 350px; color: var(--color-text-light); }
        .zoomed-artist-name { font-size: 3rem; font-weight: 700; line-height: 1.1; text-shadow: 2px 2px 5px rgba(0,0,0,0.8); margin-bottom: 5px; }
        .zoomed-artist-link { font-size: 1.1rem; font-weight: 600; color: var(--color-text-dark); background-image: linear-gradient(45deg, var(--color-accent) 0%, #ffffff 90%); text-decoration: none; transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 8px; padding: 12px 25px; border-radius: 8px; border: none; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4); text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; opacity: 1; }
        .zoomed-artist-link::before { content: none; }
        .zoomed-artist-link:hover { color: var(--color-text-dark); background-image: linear-gradient(45deg, #ffffff 0%, var(--color-accent) 100%); transform: translateY(-3px) scale(1.03); box-shadow: 0 6px 15px rgba(255, 255, 255, 0.15); text-decoration: none; }
         .zoomed-artist-link:active { transform: translateY(-1px) scale(0.99); box-shadow: 0 2px 5px rgba(0,0,0,0.4); }
        .zoomed-close-button { position: absolute; top: -15px; right: -15px; background: var(--color-bg-purchase); border: 1px solid var(--color-text-medium); color: var(--color-text-light); width: 35px; height: 35px; border-radius: 50%; font-size: 1.8rem; font-weight: bold; line-height: 33px; text-align: center; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
         .zoomed-close-button:hover { background: var(--color-accent); color: var(--color-text-dark); transform: scale(1.1); border-color: var(--color-accent); }

        /* --- MOBILE OPTIMIZATIONS & RESPONSIVENESS --- */
        @media (max-width: 768px) {
            .purchase-section::before, .purchase-section::after, .guest-artists-section::before, .guest-artists-section::after { animation: none !important; }
            .floating-card-container { animation: none !important; filter: none !important; opacity: 0.08 !important; }
            .purchase-display-area { flex-direction: column; gap: 40px; }
            .display-left { width: 80%; max-width: 400px; margin-bottom: 20px; gap: 15px; }
            .box-art-container { margin-bottom: 40px; max-width: 100%;}
            .box-art-interactive-container:hover { transform: scale(1.03); }
            .promo-card-container { --promo-card-width: 120px; bottom: -10%; right: -10%; transform: rotate(6deg); }
            .promo-card-container:hover { transform: rotate(0deg) scale(1.05) translateZ(30px); }
            .promo-text-image { width: 150px; bottom: -10%; right: -10%; transform: translate(15%, calc(-220% - 8px)) rotate(5deg); }
            .display-right.purchase-content { flex-basis: auto; max-width: 90%; margin-top: 0; }
            h1.game-logo { width: 200px; }
            .game-logo--purchase { width: 200px; margin-bottom: 25px; }
            .purchase-content > p { font-size: 1.1rem; margin-bottom: 30px; }
            .buy-button { padding: 16px 40px; font-size: 1.2rem; }
            .button-link { margin-top: 20px; }
            .guest-artists-section { padding: 60px 15px; }
            .guest-artists-prompt-img { max-width: 350px; margin-bottom: 40px; }
            .guest-card-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 25px; }
            .guest-card { max-width: 180px; }
            .zoomed-artist-overlay { padding: 10px; width: 100%; height: 100%; overflow: hidden; }
            .zoomed-artist-content { flex-direction: column; gap: 15px; max-width: 95vw; max-height: 90vh; padding: 15px; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; }
            .zoomed-artist-image { max-width: 85vw; max-height: 50vh; width: auto; height: auto; object-fit: contain; flex-shrink: 0; }
            .zoomed-artist-info { align-items: center; max-width: 90%; text-align: center; gap: 15px; width: 100%; flex-shrink: 1; }
            .zoomed-artist-name { font-size: 1.8rem; word-break: break-word; }
            .zoomed-artist-link { font-size: 1rem; padding: 10px 20px; max-width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
            .zoomed-close-button { top: 5px; right: 5px; width: 30px; height: 30px; font-size: 1.5rem; line-height: 28px; z-index: 10; }
        }

        @media (max-width: 480px) {
            :root { --card-width: 120px; --card-height: 182px; --h-row-gap: 15px; --v-col-gap: 15px;}
            h1.game-logo { width: 180px; top: 20px;}
            .scroll-prompt { font-size: 1.2rem; bottom: 25px;} .scroll-prompt::after { font-size: 1.4rem;}
            .purchase-section { padding: 50px 15px 100px 15px; }
            .purchase-display-area { gap: 30px; }
            .display-left { width: 85%; gap: 10px; }
            .box-art-container { margin-bottom: 35px; }
            .promo-card-container { --promo-card-width: 95px; bottom: -6%; right: -8%; transform: rotate(4deg); }
            .promo-text-image { width: 120px; bottom: -6%; right: -8%; transform: translate(10%, calc(-200% - 5px)) rotate(4deg); }
            .game-logo--purchase { width: 160px; margin-bottom: 20px; }
            .purchase-content > p { font-size: 1rem; }
            .buy-button { padding: 14px 35px; font-size: 1.1rem; }
            .button-link { margin-top: 25px; }
            .artist-scroll-prompt { bottom: 25px; font-size: 1rem;}
            .artist-scroll-prompt::after { font-size: 1.2rem; margin-top: 2px;}
            .guest-artists-prompt-img { max-width: 280px; margin-bottom: 30px;}
            .guest-card-grid { grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 20px; }
            .guest-card { max-width: 150px; }
            .zoomed-artist-content { padding: 10px; gap: 10px; }
            .zoomed-artist-image { max-height: 45vh; }
            .zoomed-artist-name { font-size: 1.4rem; }
            .zoomed-artist-link { font-size: 0.9rem; padding: 8px 15px;}
        }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <!-- Hero Section -->
        <div class="hero-section" id="hero">
            <!-- Updated logo to WEBP -->
            <h1 class="game-logo" id="hero-logo">
                <img src="images/titlelogo.webp" alt="10 Tail Tangle Game Logo">
                <span style="position: absolute; left: -9999px; top: -9999px;">10 Tail Tangle - The Card Game</span>
            </h1>
            <div class="scroll-wrapper" id="scroll-wrapper">
                <div class="horizontal-row-container top"> <div class="horizontal-card-track" id="h-track-top"></div> </div>
                <div class="card-column-container"> <div class="card-column" id="v-column"></div> </div>
                <div class="horizontal-row-container bottom"> <div class="horizontal-card-track" id="h-track-bottom"></div> </div>
            </div>
             <div class="scroll-prompt" id="scroll-prompt">Scroll Down</div>
        </div>

        <!-- Purchase Section -->
        <section class="purchase-section" id="purchase">
            <div class="background-card-floater" id="purchase-bg-cards"></div>
            <h2 style="position: absolute; left: -9999px; top: -9999px;">Pre-Order 10 Tail Tangle</h2>
            <div class="purchase-display-area">
                <div class="display-left">
                     <div class="box-art-container">
                         <div class="box-art-interactive-container">
                             <!-- Updated box art to WEBP -->
                             <img src="images/boxart.webp" alt="10 Tail Tangle Game Box" class="box-art-image">
                         </div>
                         <!-- Updated promo text image to local WEBP -->
                        <img src="images/preorderbonus.webp" alt="Preorder Bonus for 10 Tail Tangle!" class="promo-text-image">
                         <div class="promo-card-container">
                              <div class="promo-card">
                                  <div class="promo-card-face promo-card-front">
                                      <!-- Updated promo card to WEBP -->
                                      <img src="images/miropromo.webp" alt="Pre-order Promo Card - Miro Go Fetch" class="promo-card-image">
                                  </div>
                                  <div class="promo-card-face promo-card-back">
                                       <!-- Background image updated in CSS -->
                                  </div>
                              </div>
                         </div>
                     </div>
                 </div>
                 <div class="display-right purchase-content">
                      <div class="game-logo game-logo--purchase">
                         <!-- Updated purchase logo to WEBP -->
                         <img src="images/titlelogo.webp" alt="10 Tail Tangle Game Logo">
                      </div>
                      <p>Compete to be the first to get 10 Tails in a chain! With the help of your cards, create fun tail combos to get an advantage over others!</p>
                      <a href="https://mofumirostore.square.site/product/ten-tail-tangle-preorder-/43" target="_blank" rel="noopener noreferrer" class="button-link">
                         <button class="buy-button">Pre-Order Now!</button>
                      </a>
                 </div>
            </div>
            <div class="artist-scroll-prompt" id="artist-scroll-prompt">Artist Cards</div>
        </section>

        <!-- Guest Artists Section -->
        <section class="guest-artists-section" id="guest-artists">
            <div class="guest-artists-bg-floater" id="guest-artists-bg-cards"></div>
            <div class="guest-artists-container">
                <h2 style="position: absolute; left: -9999px; top: -9999px;">Guest Artist Cards</h2>
                 <!-- Updated Artist Prompt Path to WEBP -->
                <img src="images/artistcards.webp"
                     alt="Artist Cards - Click to View"
                     class="guest-artists-prompt-img"
                     loading="lazy">
                <div class="guest-card-grid" id="guest-card-grid">
                    <!-- Guest artist cards populated by JS -->
                </div>
            </div>
        </section>

    </div> <!-- End .main-wrapper -->

    <!-- Zoomed Artist View Structure -->
    <div id="zoomed-artist-view" class="zoomed-artist-overlay">
        <div class="zoomed-artist-content">
             <button class="zoomed-close-button" aria-label="Close zoomed view">&times;</button>
            <img id="zoomed-img" src="" alt="Guest Artist Card" class="zoomed-artist-image"> <!-- src set by JS -->
            <div id="zoomed-artist-info" class="zoomed-artist-info">
                <h3 id="zoomed-artist-name" class="zoomed-artist-name">Artist Name</h3>
                <a id="zoomed-artist-link" href="#" target="_blank" rel="noopener noreferrer" class="zoomed-artist-link">
                    Artist's Socials
                </a>
            </div>
        </div>
    </div>


    <script>
        // --- Element References ---
        const scrollWrapper = document.getElementById('scroll-wrapper');
        const vColumn = document.getElementById('v-column');
        const hTrackTop = document.getElementById('h-track-top');
        const hTrackBottom = document.getElementById('h-track-bottom');
        const scrollPrompt = document.getElementById('scroll-prompt');
        const heroSection = document.getElementById('hero');
        const purchaseSection = document.getElementById('purchase');
        const guestArtistsSection = document.getElementById('guest-artists');
        const gameLogo = document.querySelector('#hero-logo');
        const guestArtistGrid = document.getElementById('guest-card-grid');
        const purchaseBgFloater = document.getElementById('purchase-bg-cards');
        const guestArtistBgFloater = document.getElementById('guest-artists-bg-cards');
        const zoomedArtistView = document.getElementById('zoomed-artist-view');
        const zoomedImg = document.getElementById('zoomed-img');
        const zoomedArtistInfo = document.getElementById('zoomed-artist-info');
        const zoomedArtistName = document.getElementById('zoomed-artist-name');
        const zoomedArtistLink = document.getElementById('zoomed-artist-link');
        const zoomedCloseButton = document.querySelector('.zoomed-close-button');
        const artistScrollPrompt = document.getElementById('artist-scroll-prompt');

        // --- Card Data (Main Game) --- UPDATED PATHS TO WEBP ---
        const numUniqueDesigns = 20;
        const cardsData = [
            { id: 1, title: "Dumpster Diving", imageUrl: "images/dumpsterdiving.webp" },
            { id: 2, title: "Reverse", imageUrl: "images/reverse.webp" },
            { id: 3, title: "Sneaky Peak", imageUrl: "images/sneakypeak.webp" },
            { id: 4, title: "Tail Serum", imageUrl: "images/tailserum.webp" },
            { id: 5, title: "Desperate Times", imageUrl: "images/desperatetimes.webp" },
            { id: 6, title: "Draw Two", imageUrl: "images/drawtwo.webp" },
            { id: 7, title: "Goober", imageUrl: "images/goober.webp" },
            { id: 8, title: "Tail Robbery", imageUrl: "images/tailrob.webp" },
            { id: 9, title: "Tail Snip", imageUrl: "images/tailsnip.webp" },
            { id: 10, title: "Tail Swap", imageUrl: "images/tailswap.webp" },
            { id: 11, title: "Tail Tangle", imageUrl: "images/tailtangle.webp" },
            { id: 12, title: "Tail Theft", imageUrl: "images/tailtheft.webp" },
            { id: 13, title: "Mirror", imageUrl: "images/mirror.webp" },
            { id: 14, title: "Nope", imageUrl: "images/nope.webp" },
            { id: 15, title: "Cat Tail", imageUrl: "images/cattail.webp" },
            { id: 16, title: "Dragon Tail", imageUrl: "images/dragontail.webp" },
            { id: 17, title: "Fox Tail", imageUrl: "images/foxtail.webp" },
            { id: 18, title: "Racoon Tail", imageUrl: "images/raccoontail.webp" },
            { id: 19, title: "Rainbow Tail", imageUrl: "images/rainbowtail.webp" },
            { id: 20, title: "Wolf Tail", imageUrl: "images/wolftail.webp" }
        ];

        // --- Guest Artist Data --- UPDATED PATHS & URLS TO WEBP ---
        const guestArtistData = [
            { id: "zylith", name: "Zylith", imageUrl: "images/zylithpromo.webp", platformUrl: "https://nogitsune-shrine.carrd.co" },
            { id: "casper", name: "Casper", imageUrl: "images/casperpromo.webp", platformUrl: "https://x.com/casperclawell" },
            { id: "bakaroni1", name: "Bakaroni", imageUrl: "images/bakaroni1promo.webp", platformUrl: "https://www.instagram.com/bakaroni.san/" },
            { id: "bakaroni2", name: "Bakaroni", imageUrl: "images/bakaroni2promo.webp", platformUrl: "https://www.instagram.com/bakaroni.san/" },
            { id: "turtike", name: "Turtike", imageUrl: "images/turtikepromo.webp", platformUrl: "https://x.com/turtike/" },
            { id: "northboyo", name: "Northboyo", imageUrl: "images/northpromo.webp", platformUrl: "https://www.instagram.com/northboyo/" },
            { id: "racc1", name: "Reckless Racoon Studios", imageUrl: "images/racc1promo.webp", platformUrl: "https://www.instagram.com/reckless.raccoon.studios/" },
            { id: "racc2", name: "Reckless Racoon Studios", imageUrl: "images/racc2promo.webp", platformUrl: "https://www.instagram.com/reckless.raccoon.studios/" },
            { id: "queenmocha", name: "Queen Mocha", imageUrl: "images/mummypromo.webp", platformUrl: "https://linktr.ee/QueenMochaBun" },
            { id: "taffy", name: "Taffy", imageUrl: "images/taffypromo.webp", platformUrl: "https://t.me/taffysart" },
            { id: "spoopicus", name: "Spoopicus", imageUrl: "images/maxpromo.webp", platformUrl: "https://www.instagram.com/spoopicus/" },
            { id: "lemoncurdll", name: "Lemoncurdll", imageUrl: "images/lemonpromo.webp", platformUrl: "https://www.instagram.com/llemoncurdll" },
            { id: "rainard", name: "Rainard", imageUrl: "images/rainardpromo.webp", platformUrl: "#" },
            { id: "cattoforge", name: "The Catto Forge", imageUrl: "images/cattoforgepromo.webp", platformUrl: "https://thecattoforge.carrd.co" },
            { id: "tonfoxsu", name: "Tonfoxsu", imageUrl: "images/tofupromo.webp", platformUrl: "https://tonfoxsu.carrd.co" },
            { id: "roo", name: "Roo", imageUrl: "images/roopromo.webp", platformUrl: "https://featheri-roo.carrd.co/#" },
            { id: "oomanagarcha", name: "Oomanagarcha", imageUrl: "images/oomapromo.webp", platformUrl: "https://linktr.ee/oomanagarcha" },
            { id: "astralembers", name: "Astral Embers", imageUrl: "images/emberpromo.webp", platformUrl: "https://linktr.ee/astralembersco" },
            { id: "jasper", name: "Jasper", imageUrl: "images/jasperpromo.webp", platformUrl: "https://bsky.app/profile/jaspersartvault.bsky.social" }
        ];

        // --- Card Generation Functions ---
        function shuffleArray(array) { for (let i=array.length-1; i>0; i--){ const j=Math.floor(Math.random()*(i+1)); [array[i], array[j]]=[array[j], array[i]];} return array;}
        // Updated to use WEBP in background image style within JS
        function createCardElementHTML(cardData) { const f=cardData.imageUrl?`style="background-image: url('${cardData.imageUrl}');"`:''; const fC=`<div class="card-face card-front" ${f}></div>`; const bC=`<div class="card-face card-back"></div>`; return `<div class="card-container"><div class="card">${fC}${bC}</div></div>`;}

        // --- Populate Scroll Tracks ---
        function populateTracks() { let v='',hT='',hB=''; const s1=shuffleArray([...cardsData]),s2=shuffleArray([...cardsData]); cardsData.forEach(d=>v+=createCardElementHTML(d)); s1.forEach(d=>hT+=createCardElementHTML(d)); s2.forEach(d=>hB+=createCardElementHTML(d)); if(vColumn)vColumn.innerHTML=v+v; if(hTrackTop)hTrackTop.innerHTML=hT+hT; if(hTrackBottom)hTrackBottom.innerHTML=hB+hB; }

        // --- Calculate Scroll Dimensions ---
        function calculateScrollDimensions() { const rS=document.documentElement.style; const bS=getComputedStyle(document.body); const bgH=bS.getPropertyValue('--color-bg').trim(); if(bgH.startsWith('#')){ const h=bgH.substring(1); const r=parseInt(h.substring(0,2),16)||26; const g=parseInt(h.substring(2,4),16)||26; const b=parseInt(h.substring(4,6),16)||26; rS.setProperty('--color-bg-rgb',`${r},${g},${b}`);} if(vColumn){ const vC=vColumn.querySelectorAll('.card-container'); if(vC.length>=numUniqueDesigns){ const cH=vC[0].offsetHeight; const g=parseFloat(getComputedStyle(vColumn).gap)||0; const sH=(cH+g)*numUniqueDesigns; rS.setProperty('--v-col-scroll-height',`${sH}px`);}} if(hTrackTop){ const hCT=hTrackTop.querySelectorAll('.card-container'); if(hCT.length>=numUniqueDesigns){ const cW=hCT[0].offsetWidth; const g=parseFloat(getComputedStyle(hTrackTop).gap)||0; const sW=(cW+g)*numUniqueDesigns; hTrackTop.style.width=`${sW*2}px`; if(hTrackBottom)hTrackBottom.style.width=`${sW*2}px`; rS.setProperty('--h-row-scroll-width',`${sW}px`);}}}

        // --- Populate Background Floating Cards (Optimized for Mobile) ---
        function populateBackgroundFloaters(container, dataArray, desktopCount = 16, mobileCount = 4) {
            if (!container) return;
            const isMobile = window.innerWidth <= 768;
            const numFloatingCards = isMobile ? mobileCount : desktopCount;
            let floatingHTML = '';
            const shuffledBgCards = shuffleArray([...dataArray]);

            for (let i = 0; i < numFloatingCards; i++) {
                const cardData = shuffledBgCards[i % dataArray.length];
                if (!cardData || !cardData.imageUrl) continue;
                const rT = Math.random() * 85 + 5;
                const rL = Math.random() * 85 + 5;
                const rDu = Math.random() * 30 + 45;
                const rDe = Math.random() * -rDu;
                const iRX = (Math.random() - 0.5) * 30;
                const iRY = (Math.random() - 0.5) * 40;
                const iS = Math.random() * 0.2 + 0.9;
                const style = `top:${rT}%; left:${rL}%; animation-duration:${rDu}s; animation-delay:${rDe}s; transform:rotateX(${iRX}deg) rotateY(${iRY}deg) scale(${iS});`;
                // Uses background image for floaters, updated path needed here too
                floatingHTML += `
                    <div class="floating-card-container" style="${style}">
                        <div class="card" style="background-image: url('${cardData.imageUrl}'); background-size: cover; background-position: center;"></div>
                    </div>`;
            }
            container.innerHTML = floatingHTML;
        }

        // --- Populate Guest Artists Grid ---
        function populateGuestArtists() { if (!guestArtistGrid) return; let guestHTML = ''; guestArtistData.forEach((artist, index) => { guestHTML += ` <div class="guest-card" data-artist-id="${artist.id || index}" data-artist-name="${artist.name}" data-artist-img="${artist.imageUrl}" data-artist-url="${artist.platformUrl}"> <img src="${artist.imageUrl}" alt="Guest artist card by ${artist.name}" loading="lazy"> <span class="artist-link">${artist.name}</span> </div> `; }); guestArtistGrid.innerHTML = guestHTML;}

        // --- Zoomed Artist View Logic ---
        function showZoomedArtistView(artistData) {
            if (!zoomedArtistView || !artistData) return;
            zoomedImg.src = artistData.img; // src is already .webp from dataset
            zoomedImg.alt = `Guest artist card by ${artistData.name}`;
            zoomedArtistName.textContent = artistData.name;
            zoomedArtistLink.href = artistData.url || "#";
            zoomedArtistLink.textContent = "Artist's Socials";

            if (artistData.url) {
                zoomedArtistInfo.style.display = 'flex';
                zoomedArtistLink.style.display = 'inline-flex';
                zoomedArtistLink.setAttribute('aria-label', `Visit ${artistData.name}'s socials`);
                zoomedArtistLink.style.opacity = (artistData.url === "#") ? 0.7 : 1;
                zoomedArtistLink.style.cursor = (artistData.url === "#") ? 'default' : 'pointer';
            } else {
                zoomedArtistInfo.style.display = 'flex'; // Keep info visible
                zoomedArtistLink.style.display = 'none'; // Hide link if no URL
            }
            document.body.classList.add('zoomed-open');
            zoomedArtistView.classList.add('visible');
        }
        function hideZoomedArtistView() { if (!zoomedArtistView) return; zoomedArtistView.classList.remove('visible'); document.body.classList.remove('zoomed-open');}

        // Event Listeners
        if (guestArtistGrid) { guestArtistGrid.addEventListener('click', (event) => { const clickedCard = event.target.closest('.guest-card'); if (clickedCard) { const artistData = { id: clickedCard.dataset.artistId, name: clickedCard.dataset.artistName, img: clickedCard.dataset.artistImg, url: clickedCard.dataset.artistUrl, }; showZoomedArtistView(artistData); } }); }
        if (zoomedArtistView) { zoomedArtistView.addEventListener('click', (event) => { if (event.target === zoomedArtistView || event.target === zoomedCloseButton || event.target.closest('.zoomed-close-button')) { hideZoomedArtistView(); } }); window.addEventListener('keydown', (event) => { if (event.key === 'Escape' && zoomedArtistView.classList.contains('visible')) { hideZoomedArtistView(); } }); }

        // --- Snap Scroll & Prompt Visibility Logic ---
        let isSnapping = false, snapTimeout, isHeroPromptHidden = false, isArtistPromptHidden = false, throttleTimer = false;
        const SNAP_DELAY = 800;

        function updatePromptVisibility() {
             if (!guestArtistsSection || !artistScrollPrompt) return;
             const currentScroll = window.scrollY, viewportHeight = window.innerHeight, guestArtistsTop = guestArtistsSection.offsetTop;
             const artistPromptHideThreshold = guestArtistsTop - viewportHeight * 0.7, artistPromptShowThreshold = guestArtistsTop - viewportHeight * 0.8;
             const heroPromptHideThreshold = 50;

             if (!isArtistPromptHidden && currentScroll > artistPromptHideThreshold) { artistScrollPrompt.classList.add('hidden'); isArtistPromptHidden = true; }
             else if (isArtistPromptHidden && currentScroll < artistPromptShowThreshold) { artistScrollPrompt.classList.remove('hidden'); isArtistPromptHidden = false; }

             if (!isHeroPromptHidden && currentScroll > heroPromptHideThreshold) { scrollPrompt?.classList.add('hidden'); heroSection?.classList.add('prompt-hidden'); isHeroPromptHidden = true; }
             else if (isHeroPromptHidden && currentScroll <= heroPromptHideThreshold) { scrollPrompt?.classList.remove('hidden'); heroSection?.classList.remove('prompt-hidden'); isHeroPromptHidden = false; }
        }

        function handleWheelScroll(event) {
            if (isSnapping) { event.preventDefault(); return; }
            if (!throttleTimer) { throttleTimer = true; setTimeout(() => { updatePromptVisibility(); throttleTimer = false; }, 100); }

            const currentScroll = window.scrollY, viewportHeight = window.innerHeight, heroHeight = heroSection.offsetHeight;
            const purchaseTop = purchaseSection.offsetTop, guestArtistsTop = guestArtistsSection.offsetTop;
            const scrollDown = event.deltaY > 0, scrollUp = event.deltaY < 0;
            const snapToPurchaseThreshold = heroHeight * 0.5, snapToGuestThreshold = purchaseTop + viewportHeight * 0.3;
            const snapUpToPurchaseThreshold = guestArtistsTop - viewportHeight * 0.5, snapUpToHeroThreshold = purchaseTop - viewportHeight * 0.7;

            if (scrollDown) {
                if (currentScroll < snapToPurchaseThreshold && currentScroll < purchaseTop) {
                    isSnapping = true; event.preventDefault();
                    if (!isHeroPromptHidden) { scrollPrompt?.classList.add('hidden'); heroSection?.classList.add('prompt-hidden'); isHeroPromptHidden = true; }
                    scrollWrapper?.classList.add('fading-out');
                    purchaseSection.scrollIntoView({ behavior: 'smooth' });
                    clearTimeout(snapTimeout); snapTimeout = setTimeout(() => { isSnapping = false; updatePromptVisibility(); }, SNAP_DELAY);
                } else if (currentScroll > purchaseTop && currentScroll < snapToGuestThreshold && currentScroll < guestArtistsTop) {
                     isSnapping = true; event.preventDefault();
                     if (!isArtistPromptHidden) { artistScrollPrompt?.classList.add('hidden'); isArtistPromptHidden = true; }
                     scrollWrapper?.classList.add('fading-out');
                     guestArtistsSection.scrollIntoView({ behavior: 'smooth' });
                     clearTimeout(snapTimeout); snapTimeout = setTimeout(() => { isSnapping = false; updatePromptVisibility(); }, SNAP_DELAY);
                }
            } else if (scrollUp) {
                if (currentScroll > snapUpToPurchaseThreshold && currentScroll > purchaseTop) {
                    isSnapping = true; event.preventDefault();
                    if (isArtistPromptHidden) { artistScrollPrompt?.classList.remove('hidden'); isArtistPromptHidden = false; }
                    scrollWrapper?.classList.add('fading-out');
                    purchaseSection.scrollIntoView({ behavior: 'smooth' });
                    clearTimeout(snapTimeout); snapTimeout = setTimeout(() => { isSnapping = false; updatePromptVisibility(); }, SNAP_DELAY);
                } else if (currentScroll > snapUpToHeroThreshold && currentScroll < purchaseTop + viewportHeight * 0.5) {
                    isSnapping = true; event.preventDefault();
                     if (isHeroPromptHidden) { scrollPrompt?.classList.remove('hidden'); heroSection?.classList.remove('prompt-hidden'); isHeroPromptHidden = false; }
                    scrollWrapper?.classList.remove('fading-out');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    clearTimeout(snapTimeout); snapTimeout = setTimeout(() => { isSnapping = false; updatePromptVisibility(); }, SNAP_DELAY);
                }
            }
        }

        // --- Initialization ---
        let resizeTimer, ready = false;
        function handleResize() { clearTimeout(resizeTimer); resizeTimer = setTimeout(() => { calculateScrollDimensions(); populateBackgroundFloaters(purchaseBgFloater, cardsData, 16, 4); populateBackgroundFloaters(guestArtistBgFloater, guestArtistData, 12, 3); updatePromptVisibility(); }, 250); }
        function onReady() {
            if (ready) return; ready = true;
            populateTracks(); calculateScrollDimensions(); populateGuestArtists();
            populateBackgroundFloaters(purchaseBgFloater, cardsData, 16, 4);
            populateBackgroundFloaters(guestArtistBgFloater, guestArtistData, 12, 3);
            updatePromptVisibility();
            window.addEventListener('resize', handleResize);
            window.addEventListener('wheel', handleWheelScroll, { passive: false });
            if (window.scrollY > heroSection.offsetHeight * 0.5) { scrollWrapper?.classList.add('fading-out'); }
        }

        window.addEventListener('load', onReady);
        document.addEventListener('DOMContentLoaded', () => { setTimeout(onReady, 200); });

    </script>

</body>
</html>
